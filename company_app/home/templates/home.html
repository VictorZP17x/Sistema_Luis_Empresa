{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Ícono del Sistema -->
    <link rel="icon" href="{% static 'assets/images/logo_white.png' %}" type="image/x-icon">
    <!-- jQuery -->
    <script src="{% static 'assets/js/jquery-3.6.0.min.js' %}"></script>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'assets/bootstrap-5.3.6/css/bootstrap.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/bootstrap-5.3.6/css/bootstrap.min.css' %}" />
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="{% static 'assets/datatables/css/jquery.dataTables.min.css' %}" />
    <!-- Select2 CSS -->
    <link href="{% static 'assets/select2/css/select2.min.css' %}" rel="stylesheet" />
    <!-- Íconos - Feather Icons CSS -->
    <link rel="stylesheet" href="{% static 'assets/fonts/feather.css' %}">
    <!-- Template CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}" id="main-style-link">
</head>

<body class="{% if show_header_search %}dashboard-page {% endif %}{% if is_cliente %}cliente{% endif %}">
    <!-- Navegation-Bar -->
    <header class="pc-header">
        <div class="header-wrapper">
            <!-- Ocultar/Mostrar Menú y Buscador -->
            <div class="me-auto pc-mob-drp">
                <ul class="list-unstyled">
                    <li class="pc-h-item pc-sidebar-collapse">
                        <a href="#" class="pc-head-link ms-0" id="sidebar-hide">
                            <i data-feather="menu"></i>
                        </a>
                    </li>
                    <li class="pc-h-item pc-sidebar-popup">
                        <a href="#" class="pc-head-link ms-0" id="mobile-collapse">
                            <i data-feather="menu"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- Perfil -->
            <div class="ms-auto">
                <ul class="list-unstyled">
                    <li class="dropdown pc-h-item header-user-profile">
                        <a class="pc-head-link dropdown-toggle arrow-none me-0" data-bs-toggle="dropdown" href="#"
                            role="button" aria-haspopup="false" data-bs-auto-close="outside" aria-expanded="false">
                            <i data-feather="user"></i>
                        </a>
                        <div
                            class="dropdown-menu dropdown-user-profile dropdown-menu-end pc-h-dropdown p-0 overflow-hidden">
                            <div class="dropdown-header d-flex align-items-center justify-content-between bg-primary">
                                <div class="d-flex my-2">
                                    <div class="flex-shrink-0">
                                        <img src="{% static 'assets/images/user/avatar-2.jpg' %}" alt="user-image"
                                            class="user-avtar wid-35" />
                                    </div>
                                    <div class="ms-2">
                                        <span class="fw-bold text-white">{{ request.user.first_name }} {{request.user.last_name }}</span>
                                        <br>
                                        <small class="text-white-50">{{ request.user.username }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown-body">
                                <div class="profile-notification-scroll position-relative"
                                    style="max-height: calc(100vh - 225px)">
                                    <a href="#" class="dropdown-item">
                                        <span>
                                            <i data-feather="settings" class="text-muted me-2"></i>
                                            <span>Cambiar Datos Personales</span>
                                        </span>
                                    </a>
                                    <div class="d-grid my-2">
                                        <form action="{% url 'home:logout' %}" method="post" style="display:inline;">
                                            {% csrf_token %}
                                            <button type="submit" class="btn btn-primary">
                                                <i data-feather="log-out" class="me-2"></i>
                                                Cerrar Sesión
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Sidebar -->

    <nav class="pc-sidebar">
        <div class="navbar-wrapper">
            <div class="m-header d-flex align-items-center justify-content-center my-4">
                <a href="{% url 'home:dashboard' %}" class="b-brand text-primary">
                    <img src="{% static 'assets/images/logo.png' %}" class="img-fluid sidebar-logo-custom me-2"
                        alt="logo">
                </a>
            </div>
            <div class="navbar-content">
                <ul class="pc-navbar">
                    <!-- SIEMPRE visible para todos -->
                    <li class="pc-item pc-hasmenu">
                        <a href="{% url 'home:dashboard' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="grid"></i></span>
                            <span class="pc-mtext">Inicio</span>
                        </a>
                    </li>
                    <li class="pc-item">
                        <a href="{% url 'home:works_to_do' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="file-text"></i></span>
                            <span class="pc-mtext">Trabajos</span>
                        </a>
                    </li>
                    <!-- SOLO para NO clientes -->
                    {% if not is_cliente %}
                    <li class="pc-item pc-hasmenu">
                        <a href="{% url 'home:company' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="briefcase"></i></span>
                            <span class="pc-mtext">Empresas</span>
                        </a>
                    </li>
                    <li class="pc-item">
                        <a href="{% url 'home:work_type' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="clipboard"></i></span>
                            <span class="pc-mtext">Servicios</span>
                        </a>
                    </li>
                    {% if not is_empleado %}
                    <li class="pc-item">
                        <a href="{% url 'home:log_history' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="list"></i></span>
                            <span class="pc-mtext">Historial</span>
                        </a>
                    </li>
                    <li class="pc-item">
                        <a href="{% url 'home:client' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="user"></i></span>
                            <span class="pc-mtext">Clientes</span>
                        </a>
                    </li>
                    <li class="pc-item pc-hasmenu">
                        <a href="{% url 'home:user' %}" class="pc-link">
                            <span class="pc-micon"><i data-feather="users"></i></span>
                            <span class="pc-mtext">Usuarios</span>
                        </a>
                    </li>
                    {% endif %}
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    <main id="main-content">
        {% block content %}

        {% endblock %}
    </main>
    <!-- Footer -->
    <footer class="pc-footer">
        <div class="footer-wrapper container-fluid">
            <div class="row">
                <div class="col my-1">
                    <p class="m-0">
                        &copy; OLTEC. Todos los derechos reservados.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Bootstrap JS -->
    <script src="{% static 'assets/bootstrap-5.3.6/js/bootstrap.bundle.min.js' %}"></script>
    <!-- DataTables JS -->
    <script src="{% static 'assets/datatables/js/jquery.dataTables.min.js' %}"></script>
    <!-- SweetAlert -->
    <script src="{% static 'assets/js/sweetalert2@11.js' %}"></script>
    <!-- Select2 JS -->
    <script src="{% static 'assets/select2/js/select2.min.js' %}"></script>
    <!-- Manejo de Toggle y Clases para el Contenido -->
    <script src="{% static 'assets/js/pcoded.js' %}"></script>
    <!-- Íconos - Feather Icons JS -->
    <script src="{% static 'assets/js/plugins/feather.min.js' %}"></script>
    <!-- Plugin para Customizar Scrollbars -->
    <script src="{% static 'assets/js/plugins/simplebar.min.js' %}"></script>
    <!-- CUSTOM JS -->
    {% if show_welcome %}
    <script src="{% static 'assets/js/home_js/welcome-alert.js' %}"></script>
    {% endif %}
    <script src="{% static 'assets/js/slide_bar.js' %}"></script>

    {% block extra_css %}

    {% endblock %}

    {% block extra_js %}

    {% endblock %}
</body>

</html>